<!DOCTYPE html>
<html>
  <head>
    <title>VP result page</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- UIkit CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.11.1/dist/css/uikit.min.css" />

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" />
    <link href="http://fonts.googleapis.com/css?family=Cookie" rel="stylesheet" type="text/css" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css" />
    <!-- custom CSS -->
    <link rel="stylesheet" href="../css/style.css" />



    <!-- UIkit JS -->
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.11.1/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.11.1/dist/js/uikit-icons.min.js"></script>
  </head>

</html>

<body onload="displayResults();">
  <div class="main-container">
    <header>
      <!-- Navbar -->

      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="./VPTestHome.html">
          <img src="../images/Gmart.png" width="30" height="30" alt="">
        </a>
        <a class="navbar-brand" href="./VPTestHome.html">GatorMart</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="./aboutUs.html">About Us <span class="sr-only">(current)</span></a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0" id="navBarSearchForm">
            <div class="select-dropdown">
              <select name="category" id="category">
                <option value="">All</option>
                <option value="Textbook">Textbooks</option>
                <option value="Notes">Notes</option>
                <option value="Furniture">Furniture</option>
              </select>
            </div>
            <input class="form-control mr-sm-2" id="search" autocomplete="off" type="text" placeholder="Search" aria-label="Search">

            <button class="btn btn-warning my-2 my-sm-0 search-button" type="submit"
              onclick="test(document.getElementById('search').value, document.getElementById('category').value)">
              <i class="fa fa-search fa-lg" aria-hidden="true"></i>
            </button>
          </form>
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="./postItem.html">Post/Sell <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="./login.html">Login <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="./userPage.html">My Page <span class="sr-only">(current)</span></a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- Navbar -->

    </header>
    <!-- Header Ends-->
    <div class="page-wrap">
      <section class="section my-4">
        <div class="container text-center">
          <div class="title py-5">
            <div id="resultsGiven"></div>
          </div>


          <section class="mt-5">
            <div class="row">
              <div id="main-content"></div>
            </div>
          </section>
          <!-- </div>
        </div> -->
          <!-- </section> -->


          <!-- <section class="section my-4">
        <div class="container text-center">
          <div class="title py-5">
            <p class="text-left">1-6 0f 6 results for "Intro to Java" <button type="button"
                class="btn btn-outline-secondary btn-sm float-md-right">Sort by price</button></p>
          </div> -->
          <!-- Image cards  -->
          <!-- <section class="mt-5">
          <div class="row">
            <div class="col-md-3 mb-5">
              <div class="card shadow" style="width: 18rem;">
                <a href="#">
                  <img
                    src="https://images.unsplash.com/photo-1512820790803-83ca734da794?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzNDcxNjEyNQ&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=1080"
                    class="card-img-top" alt="..." /></a>
                <div class="card-body">
                  <h5 class="card-title font-poppins">Item Name</h5>
                  <h6 class="mb-3">$52.99</h6>
                  <a href="#" class="btn btn-primary font-size-09 text-light product-button">View Details</a>
                </div>
              </div>
            </div>
            <div class="col-md-3 mb-5">
              <div class="card shadow" style="width: 18rem;">
                <a href="#">
                  <img
                    src="https://images.unsplash.com/photo-1512820790803-83ca734da794?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzNDcxNjEyNQ&ixlib=rb-1.2.1&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=1080"
                    class="card-img-top" alt="..." /></a>
                <div class="card-body">
                  <h5 class="card-title font-poppins">Item Name</h5>
                  <h6 class="mb-3">$52.99</h6>
                  <a href="#" class="btn btn-primary font-size-09 text-light product-button">View Details</a>
                </div>
              </div>
            </div>
          </div>
        </section> -->
        </div>
      </section>
    </div>



    <!-- </div> -->
    <!-- Footer Starts-->
    <div class="footer">
      <footer class="footer-distributed" id="footer">
        <div class="footer-left">
          <img src="" />
          <h3>Gator<span>Mart</span></h3>

          <p class="footer-links">
            <a href="#">Home</a>
            |
            <a href="#">About</a>
            |
            <a href="#">Contact</a>
          </p>

          <p class="footer-company-name">Â© 2022 GatorMart Pvt. Ltd.</p>
        </div>

        <div class="footer-center">
          <div>
            <i class="fa fa-lightbulb-o"></i>
            <p>
              <span>Software Engineering - CSC648/848</span>
              <span>Spring, 2022, Section 03, Team 02</span>
            </p>
          </div>

          <!-- <div>
                  <i class="fa fa-phone"></i>
                  <p></p>
              </div> -->
          <div>
            <i class="fa fa-envelope"></i>
            <p>
              <a href=""><span>support@gatormart.com</span></a>
            </p>
          </div>
        </div>
        <div class="footer-right">
          <p class="footer-company-about">
            <span>About GatorMart</span>
            GatorMart is an online hub exclusively for SFSU community. GatorMart provides service to current students,
            faculty, and staff.
          </p>
          <div class="footer-icons">
            <a href="#"><i class="fa fa-facebook"></i></a>
            <a href="#"><i class="fa fa-twitter"></i></a>
            <a href="#"><i class="fa fa-instagram"></i></a>
            <a href="#"><i class="fa fa-linkedin"></i></a>
            <a href="#"><i class="fa fa-youtube"></i></a>
          </div>
        </div>
      </footer>
    </div>
    <!-- Footer Ends-->
  </div>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>

</html>






<script>
  function test(search, category) {
    if (search == "") {
      search = "EMPTYSEARCHTEMP"
    }
    if (category == "") {
      category = "EMPTYCATEGORYTEMP"
    }
    fetch(`/VPResult.html/${search}/${category}`, { method: "get" })
      .then(async (response) => {
        return await response.json()
      })
      .then(async (result) => {
        const searchResult = result.searchResult;
        sessionStorage.searchResult = JSON.stringify(searchResult)
        sessionStorage.searchTerm = search
        sessionStorage.categoryTerm = category

        document.location.href = '/VPResult.html'
      })
  }
</script>

<script>
  function displayResults() {
    var searchResults = JSON.parse(sessionStorage.searchResult);
    var search = sessionStorage.searchTerm;
    var category = sessionStorage.categoryTerm;

    let resultsString = "1- " + searchResults.length + " of " + searchResults.length + " results ";
    if (search != "EMPTYSEARCHTEMP" && category != "EMPTYCATEGORYTEMP") {
      resultsString += ` for "` + search + `" in "` + category + `"`;
    }
    else if (search == "EMPTYSEARCHTEMP" && category != "EMPTYCATEGORYTEMP") {
      resultsString += ` in "` + category + `"`;
    }
    else if (search != "EMPTYSEARCHTEMP" && category == "EMPTYCATEGORYTEMP") {
      resultsString += ` for "` + search + `"`;
    }
    else {
      resultsString += " total";
    }
    document.getElementById("resultsGiven").innerHTML += `<p class="text-left">${resultsString}<button type="button"
                class="btn btn-outline-secondary btn-sm float-md-right">Sort by price</button></p>`

    for (let i = 0; i < searchResults.length; i++) {
      document.getElementById("main-content").innerHTML +=
        `<div class="col-md-3 mb-5">
           <div class="card shadow" style="width: 18rem;">
           <a href="/productDetail.html">
           <img src = "${searchResults[i].File_Link}" alt="${searchResults[i].Title}" class="card-img-top" alt="..." /></a>
           <div class="card-body">
              <h5 class="card-title font-poppins">${searchResults[i].Title}</h5>
              <h6 class="mb-3">$${searchResults[i].Price}</h6>
            <a href="/productDetail.html" class="btn btn-primary font-size-09 text-light product-button">View Details</a>
          </div>
          </div>
          </div>`
    }
  }
</script>
